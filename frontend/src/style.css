@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================== å…¨å±€åŸºç¡€ ===================== */
html,
body {
  height: 100%;
  margin: 0;
  overflow: hidden; /* é¡µé¢ä¸æ•´ä½“æ»šåŠ¨ï¼Œåªè®©å†…éƒ¨å®¹å™¨æ»šåŠ¨ */
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif;
  background: #f3f4f6;
  color: #111827;
}

#app {
  height: 100%;
}

:root {
  /* === unified media colors, match NODE_COLORS æ—§å€¼ === */
  --media-aux-border: #E5E7EB;  /* auxBorder */

  --media-image: #5F96DB;     /* image */
  --media-video: #5ABF8E;       /* video */
  --media-audio: #E06C6E;       /* audio */

  /* soft tints for header / background */
  --media-image-soft: #8FB7E8;  
  --media-video-soft: #8FD1B4;
  --media-audio-soft: #F4A7A8;
}

/* ===================== workflow èŠ‚ç‚¹å¡ç‰‡ ===================== */

/* workflow èŠ‚ç‚¹å¡ç‰‡ç»Ÿä¸€åŸºç¡€å¤–è§‚ï¼Œå®½é«˜ç”±å®¹å™¨æ§åˆ¶ */
.node-card {
  width: 100%;              /* ç”± foreignObject æ§åˆ¶å¡ç‰‡å®½åº¦ */
  border-radius: 8px;
  overflow: hidden;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.04);
  transition:
    border-color 0.15s ease-out,
    box-shadow 0.15s ease-out,
    transform 0.1s ease-out;
}

.node-card.is-selected[data-node-category="image"] {
  box-shadow: 0 0 0 2px var(--media-image);
}

.node-card.is-selected[data-node-category="video"] {
  box-shadow: 0 0 0 2px var(--media-video);
}

.node-card.is-selected[data-node-category="audio"] {
  box-shadow: 0 0 0 2px var(--media-audio);
}

.node-card:hover {
  border-color: #cbd5f5;
  box-shadow: 0 10px 26px rgba(15, 23, 42, 0.06);
  /* transform: translateY(-1px); */
}

.node-card.selected {
  border-color: #2563eb;
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.3);
}

/* ========== node-card å¤šæ¨¡æ€è‰²ç³» ========== */
.node-card[data-node-category="image"] {
  border-color: var(--media-image);
  background: linear-gradient(
    to bottom,
    #ffffff,
    color-mix(in srgb, var(--media-image) 12%, #ffffff)
  );
}

.node-card[data-node-category="video"] {
  border-color: var(--media-video);
  background: linear-gradient(
    to bottom,
    #ffffff,
    color-mix(in srgb, var(--media-video) 12%, #ffffff)
  );
}

.node-card[data-node-category="audio"] {
  border-color: var(--media-audio);
  background: linear-gradient(
    to bottom,
    #ffffff,
    color-mix(in srgb, var(--media-audio) 12%, #ffffff)
  );
}


/* ç¼©ç•¥å›¾ï¼ˆç”¨äºèŠ‚ç‚¹å’Œæ‹¼æ¥åŒºï¼‰ */
.thumb {
  width: 100%;
  height: 96px;
  object-fit: cover;
  background: #f3f4f6;
  display: block;
}

/* èŠ‚ç‚¹æ ‡é¢˜ */
.node-label {
  padding: 6px 8px;
  font-size: 12px;
  color: #111827;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* workflow è¿æ¥çº¿ */
.link {
  fill: none;
  stroke: #d1d5db;
  stroke-width: 2px;
}

/* ===================== é¢„è§ˆå¼¹çª— ===================== */

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.modal {
  background: #ffffff;
  border-radius: 12px;
  max-width: 90%;
  max-height: 90%;
  padding: 16px 18px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.6);
  overflow: auto;
}

.modal img,
.modal video {
  max-width: 100%;
  max-height: 80vh;
  display: block;
  margin: 0 auto;
  border-radius: 8px;
}

/* ===================== æ—¶é—´è½´ & æ‹¼æ¥åŒºåŸŸ ===================== */
/* =============== Transport strip (buffer above timeline) =============== */

#buffer-strip {
  display: flex;
  align-items: center;
  gap: 8px;

  /* è®©ä¸Šæ–¹æœ‰è¶³å¤Ÿé«˜åº¦ï¼ŒæŒ‰é’®å’Œå¡ç‰‡éƒ½ä¸è¢«è£æ‰ */
  padding: 8px 0 8px;

  min-height: 72px;
  max-height: 72px;

  overflow-x: auto;
  overflow-y: hidden;   /* âœ… buffer æ•´è¡Œé«˜åº¦å›ºå®šï¼Œä¸ä¼šæŠ–åŠ¨ */

  box-sizing: border-box;
  border-bottom: 1px solid #e5e7eb;
}

.buffer-item {
  overflow: visible;
  position: relative;
  width: 80px;
  height: 56px;
  border-radius: 6px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  flex-shrink: 0;
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    box-shadow 0.15s ease-out,
    border-color 0.15s ease-out;
    /* âŒ ä¸å†å¯¹ transform åšè¿‡æ¸¡ï¼Œå½»åº•é¿å…ä¸Šä¸‹ä½ç§» */
}

/* ç¼©ç•¥å›¾ï¼šåˆšå¥½å¡«æ»¡å¡ç‰‡ */
.buffer-item img,
.buffer-item video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  border-radius: 4px;
}

/* buffer åº•éƒ¨çš„æ•°æ®æ¡ */
.buffer-meta {
  position: absolute;
  left: 4px;
  right: 4px;
  bottom: 4px;
  height: 16px;
  border-radius: 999px;
  padding: 0 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: #ffffff;
  pointer-events: none;
  white-space: nowrap;
  z-index: 0;
}

/* ä¸‰ç§ç±»å‹çš„è‰²ç³» */
.buffer-item--image {
  border: 2px solid var(--media-image);
  background: color-mix(in srgb, var(--media-image) 16%, #ffffff);
}
.buffer-item--image .buffer-meta {
  background: var(--media-image);
}

.buffer-item--video {
  border: 2px solid var(--media-video);
  background: color-mix(in srgb, var(--media-video) 16%, #ffffff);
}
.buffer-item--video .buffer-meta {
  background: var(--media-video);
}

.buffer-item--audio {
  border: 2px solid var(--media-audio);
  background: color-mix(in srgb, var(--media-audio) 16%, #ffffff);
}
.buffer-item--audio .buffer-meta {
  background: var(--media-audio);
}

/* hover åªæ”¹é¢œè‰²å’Œé˜´å½±ï¼Œä¸å†ä½ç§» â†’ æ²¡æœ‰ y æŠ–åŠ¨ */
.buffer-item:hover {
  border-color: #cbd5f5;
  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
}

.buffer-placeholder {
  font-size: 11px;
  color: #9ca3af;
  font-style: italic;
}


/* å¤–å±‚å®¹å™¨ï¼šç•™å‡ºå†…è¾¹è·ï¼Œé¿å…è´´è¾¹ */
#stitching-panel-wrapper {
  padding: 8px 16px 5px;
  box-sizing: border-box;
  background: #f9fafb;
  border-radius: 10px;
  overflow-x: auto;
  overflow-y: hidden;
  margin-bottom: 4px;
}

/* éšè—æ¨ªå‘æ»šåŠ¨æ¡ï¼ˆä»ç„¶å¯ä»¥æ»šåŠ¨ï¼‰ */
#stitching-panel-wrapper::-webkit-scrollbar {
  display: none;
}
#stitching-panel-wrapper {
  scrollbar-width: none;
}

/* æ—¶é—´è½´åŒºåŸŸæœ¬èº«ï¼ˆå®½åº¦ç”± JS æ§åˆ¶ï¼‰ */
#timeline-ruler {
  position: relative;
  background: #fafafa;
  border-bottom: 1px solid #e5e7eb;
}

/* è§†é¢‘è½¨ï¼šå›ºå®šé«˜åº¦ï¼Œé˜²æ­¢åŠ  clip æ—¶è½»å¾®æŠ–åŠ¨ */
#stitching-panel {
  min-height: 86px;
  height: 94px;
  display: flex;
  align-items: center;
  padding-top: 10px;    /* åŸæ¥ 24 */
  padding-bottom: 6px;  /* åŸæ¥ 16 */
  box-sizing: border-box;
}

/* éŸ³é¢‘è½¨ï¼šåŒç† */
#audio-stitching-panel {
  min-height: 46px;
  height: 46px;
  display: flex;
  align-items: center;
  border-top: 1px solid #d1d5db !important; /* ç°è‰²ï¼Œä¸ç³»ç»Ÿé»˜è®¤ä¸€è‡´ */
  margin-top: 8px;
  background: transparent !important;
}

/* ===================== è§†é¢‘ / éŸ³é¢‘ clips å®¹å™¨ ===================== */

/* è§†é¢‘ clips å®¹å™¨ï¼Œè®© clip ç¦»æ—¶é—´è½´å†è¿œä¸€ç‚¹ */
#clips-container {
  display: flex;
  flex-wrap: nowrap;
  gap: 8px;
  align-items: center;
  min-height: 56px;
  padding: 6px 0 10px;
  margin-top: 8px;
}

/* éŸ³é¢‘ clips å®¹å™¨ */
#audio-clips-container {
  display: flex;
  flex-wrap: nowrap;
  gap: 6px;
  align-items: center;
  min-height: 40px;
  padding: 6px 0;
}

/* æ‹–æ”¾ç›®æ ‡åŒºåŸŸé«˜äº®ï¼ˆè§†é¢‘è½¨ & éŸ³é¢‘è½¨ï¼‰ */
.drag-over {
  /* å¤–å±‚æŸ”å…‰æè¾¹ï¼ˆä¸æ”¹å˜å°ºå¯¸ï¼‰ */
  box-shadow:
    0 0 0 1px rgba(180, 190, 200, 0.55) inset,
    0 0 10px rgba(200, 210, 220, 0.35) inset;

  /* å†…éƒ¨æ¸å˜ç§‘æŠ€å…‰æ„Ÿ */
  background: linear-gradient(
    180deg,
    rgba(245, 247, 250, 0.9) 0%,
    rgba(232, 235, 240, 0.85) 100%
  );
}

/* ===================== è§†é¢‘ clip-item æ ·å¼ ===================== */
/* ç»Ÿä¸€è¦†ç›–æ—§æ ·å¼ï¼Œé¿å…é‡å¤å®šä¹‰ */
.clip-item {
  position: relative;
  cursor: grab;
  border-radius: 6px;
  padding: 0px;
  background: linear-gradient(to bottom, #ffffff, #f9fafb);
  border: 1px solid #e5e7eb;
  display: flex;
  flex-direction: column;     /* âœ… è®©ç¼©ç•¥å›¾åœ¨ä¸Šï¼Œä¿¡æ¯æ¡åœ¨ä¸‹ */
  align-items: stretch;       /* ä¿¡æ¯æ¡æ’‘æ»¡å®½åº¦ */
  justify-content: flex-start;
  transition:
    box-shadow 0.15s ease-out,
    transform 0.1s ease-out,
    border-color 0.15s ease-out,
    background 0.15s ease-out;
  flex-shrink: 0;
}

/* ç¼©ç•¥å›¾æœ¬èº«å®Œå…¨å¡«æ»¡ clip-item é¡¶éƒ¨ */
.clip-item img,
.clip-item video {
  width: 100%;
  height: 60px;
  object-fit: cover;
  display: block;
  border-radius: 4px;
}

/* clip-item base stays neutral; type-specific tints below */
.clip-item-image {
  background: linear-gradient(to bottom, #ffffff, var(--media-image-soft));
  border-color: var(--media-image);
}

.clip-item-video {
  background: linear-gradient(to bottom, #ffffff, var(--media-video-soft));
  border-color: var(--media-video);
}


/* ===== è§†é¢‘åº•éƒ¨ä¿¡æ¯æ¡ï¼ˆicon + name + durationï¼‰ ===== */
.clip-meta {
  margin-top: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 10px;
  color: #4b5563;
  width: 100%;
}

.clip-meta-left {
  display: flex;
  align-items: center;
  overflow: hidden;
}

.clip-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  padding: 0 4px;
  border-radius: 999px;
  border: 1px solid #d1d5db;
  font-size: 10px;
  font-weight: 600;
  color: #4b5563;
  margin-right: 4px;
  line-height: 1.2;
  box-sizing: border-box;
}

.clip-name {
  max-width: 120px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.clip-duration {
  margin-left: 6px;
  flex-shrink: 0;
  font-variant-numeric: tabular-nums;
}

/* ===================== é€šç”¨åˆ é™¤æŒ‰é’®åº•åº§ ===================== */
.remove-btn {
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: #ffffff;
  color: #dc2626;             /* red-600 */
  border: 1px solid #fecaca;  /* red-200 */
  font-size: 12px;
  line-height: 1;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(15, 23, 42, 0.18);
  opacity: 0.9;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition:
    background-color 0.15s ease-out,
    color 0.15s ease-out,
    border-color 0.15s ease-out,
    transform 0.1s ease-out,
    opacity 0.1s ease-out,
    box-shadow 0.1s ease-out;
}

/* è§†é¢‘ / éŸ³é¢‘è½¨é‡Œçš„ clipï¼šç»§ç»­ä¿æŒâ€œç¨å¾®æ¼‚åœ¨å¤–é¢â€çš„æ„Ÿè§‰ */
.clip-item .remove-btn,
.audio-clip-item .remove-btn {
  top: -6px;
  right: -6px;
}

/* buffer åŒºåŸŸï¼šæŒ‰é’®æ”¾åœ¨å¡ç‰‡å†…éƒ¨å³ä¸Šè§’ï¼Œæ°¸è¿œä¸ä¼šè¢«è£åˆ‡ */
.buffer-item .buffer-remove-btn {
  top: -6px;
  right: -6px;
  z-index: 100; /* æ¯”ç¼©ç•¥å›¾å’Œ buffer-meta éƒ½é«˜ */
}

/* hover / active æ•ˆæœç»Ÿä¸€ */
.remove-btn:hover {
  background-color: #dc2626;
  color: #ffffff;
  border-color: #dc2626;
  opacity: 1;
  transform: scale(1.05);
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.28);
}

.remove-btn:active {
  transform: scale(0.95);
}


/* æ‹–åŠ¨ä¸­çš„æ ·å¼ï¼ˆè§†é¢‘ & éŸ³é¢‘ç»Ÿä¸€ï¼‰ */
.clip-item.dragging,
.audio-clip-item.dragging {
  opacity: 0.3;
  transform: scale(0.95);
}

/* ===================== éŸ³é¢‘å—æ ·å¼ ===================== */
/* éŸ³é¢‘åç§°å‰çš„ AUD å°æ ‡ç­¾ */
.audio-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  padding: 0 4px;
  border-radius: 999px;
  border: 1px solid #bfdbfe;
  font-size: 10px;
  font-weight: 600;
  color: #1d4ed8;
  margin-right: 4px;
  box-sizing: border-box;
}

/* è®©åå­—å’Œ AUD åœ¨ä¸€è¡Œå±•ç¤º */
.audio-clip-name {
  display: flex;
  align-items: center;
  font-weight: 500;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* éŸ³é¢‘å—æ•´ä½“é£æ ¼ */
.audio-clip-item {
  position: relative;
  height: 40px;
  border-radius: 6px;          /* åŸæ¥æ˜¯ 999pxï¼Œæ”¹æˆå’Œè§†é¢‘ä¸€è‡´ */
  padding: 0 12px;
  background: linear-gradient(to right, var(--media-audio-soft), #ffffff);
  border: 1px solid var(--media-audio);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  box-sizing: border-box;
  transition:
    box-shadow 0.15s ease-out,
    transform 0.1s ease-out,
    border-color 0.1s ease-out;
}

.audio-clip-item:hover {
  border-color: #60a5fa;
  box-shadow: 0 4px 10px rgba(37, 99, 235, 0.18);
  transform: translateY(-1px);
}

.audio-thumb {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  font-size: 11px;
  color: #1f2933;
  overflow: hidden;
  white-space: nowrap;
}

.audio-clip-name {
  font-weight: 500;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.audio-clip-duration {
  font-size: 10px;
  color: #6b7280;
}

/* ===================== Loader ===================== */

.loader {
  border-top-color: #2563eb;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ===================== é¢„è§ˆå¼¹çª—å…³é—­æŒ‰é’® ===================== */

.modal-close-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: #ffffff;
  color: #dc2626;             /* red-600 */
  border: 1px solid #fecaca;  /* red-200 */
  font-size: 14px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(15, 23, 42, 0.18);
  transition:
    background-color 0.15s ease-out,
    color 0.15s ease-out,
    border-color 0.15s ease-out,
    transform 0.1s ease-out,
    box-shadow 0.1s ease-out;
}

.modal-close-btn:hover {
  background-color: #dc2626;  /* çº¢åº• */
  color: #ffffff;             /* ç™½å­— */
  border-color: #dc2626;
  transform: scale(1.05);
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.28);
}

.modal-close-btn:active {
  transform: scale(0.95);
}

/* ===================== èŠ‚ç‚¹å†…éƒ¨æ»šåŠ¨æ¡ & Prompt / Parameters æ§ä»¶ ===================== */

/* æç»†æ»šåŠ¨æ¡ï¼šé»˜è®¤éšè—ï¼Œé¼ æ ‡æ‚¬åœæ—¶å‡ºç° */
.thin-scroll {
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  overscroll-behavior-x: none;
}

.thin-scroll::-webkit-scrollbar {
  width: 3px;
  height: 3px;
}

.thin-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.thin-scroll::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 2px;
}

/* æ‚¬åœå®¹å™¨æ—¶æ‰æ˜¾ç¤ºæ»šåŠ¨æ¡ */
.thin-scroll:hover::-webkit-scrollbar-thumb {
  background: #d1d5db;
}

.thin-scroll:hover::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* ========== Prompt phrase è¡Œ ========== */

.phrase-row {
  display: flex;
  align-items: center;
  gap: 3px;
  margin-bottom: 2px;
}

.phrase-row:last-child {
  margin-bottom: 0;
}

/* æ–‡æœ¬è¾“å…¥ï¼šä½œä¸ºå­å†…å®¹ï¼Œæ¯”æ ‡é¢˜æ›´å°ä¸€å· */
.phrase-input {
  flex: 1 1 auto;
  min-width: 0;
  font-size: 9px;
  line-height: 1.2;
  height: 16px;
  padding: 1px 4px;
  border-radius: 3px;
  border: 1px solid #e5e7eb;
  background: #ffffff;
  color: #374151;
  outline: none;
  box-sizing: border-box;

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.phrase-input:focus {
  border-color: #93c5fd;
  box-shadow: 0 0 0 1px #bfdbfe;
}

.phrase-input:hover:not(:focus) {
  background-color: #f9fafb;
}

/* æƒé‡å°æ–¹å—ï¼šé«˜åº¦ä¸ phrase-input å®Œå…¨ä¸€è‡´ï¼Œæ›´ç´§å‡‘ */
.weight-input {
  flex: 0 0 30px;
  width: 30px;
  font-size: 9px;
  line-height: 1.2;
  height: 16px;
  padding: 1px 2px;
  text-align: center;
  border-radius: 3px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  color: #374151;
  outline: none;
  box-sizing: border-box;

  -webkit-appearance: none;
  -moz-appearance: textfield;
  appearance: none;
}

.weight-input::-webkit-inner-spin-button,
.weight-input::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.weight-input:focus {
  border-color: #93c5fd;
  box-shadow: 0 0 0 1px #bfdbfe;
  background: #ffffff;
}

.weight-input:hover:not(:focus) {
  background-color: #f3f4f6;
}

/* ========== Prompt æŠ˜å å°èŠ‚ï¼šPositive / Negative Prompt å¤´éƒ¨ ========== */

/* .prompt-section {
  margin-top: 3px;
} */

.prompt-section-header {
  display: flex;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: 8.5px;          /* æ¯”å­å†…å®¹å¤§ä¸€å·ï¼Œæ¯” Input ç•¥å° */
  color: #4b5563;
  padding: 0 2px;
}

.prompt-toggle-icon {
  margin-right: 4px;
  font-size: 8.5px;
  color: #9ca3af;
}

.prompt-section-title {
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* æ•°å­—ç»Ÿè®¡ï¼šå›ºå®šå®½åº¦ + å³å¯¹é½ â†’ å‚ç›´ä¸¥æ ¼å¯¹é½ */
.prompt-count {
  flex: 0 0 24px;
  text-align: right;
  font-size: 8.5px;
  color: #9ca3af;
}

.prompt-section-body {
  margin-top: 2px;
}

/* Prompt å¤´éƒ¨ç¦ç”¨ï¼šä¸å†å¯ç‚¹å‡»ã€é¢œè‰²æ›´æµ… */
.prompt-section-header.is-disabled {
  cursor: default;
  opacity: 0.45;
  pointer-events: none;      /* ç›´æ¥ç¦æ­¢ç‚¹å‡» */
}

.prompt-section-header.is-disabled .prompt-toggle-icon {
  color: #d1d5db;
}

/* ========== Input Images ç›¸å†Œï¼ˆæ–°ç‰ˆï¼šçºµå‘åˆ—è¡¨ + è‡ªé€‚åº”é«˜åº¦ï¼‰ ========== */

/* æ•´ä¸ª Input ä¸­å›¾ç‰‡åŒºå—ï¼šä¸Šé¢æœ‰è™šçº¿åˆ†éš”ï¼Œç«–å‘æ’åˆ— */
.input-images-section {
  margin-top: 4px;
  padding-top: 4px;
  border-top: 1px dashed #e5e7eb;

  display: flex;
  flex-direction: column;
  gap: 4px;
  flex-shrink: 0;           /* ä¸è¦è¢«å‹æ‰ */
  font-size: 8.5px;
  color: #4b5563;
}

/* å›¾ç‰‡åˆ—è¡¨ï¼šçºµå‘å †å ï¼Œæ¯å¼ å›¾å ä¸€è¡Œ */
.input-images-list {
  display: flex;
  flex-direction: column;
  gap: 4px;

  /* å¦‚æœæ€•å¤ªé«˜ï¼Œå¯ä»¥æ‰“å¼€ä¸‹é¢ä¸¤è¡Œï¼Œè®©å†…éƒ¨è‡ªå·±æ»šåŠ¨ */
  /* max-height: 260px;
  overflow-y: auto; */
}

/* å•ä¸ªç¼©ç•¥å›¾å®¹å™¨ï¼šå®½åº¦è·Ÿç€å·¦ä¾§åˆ—ï¼Œé«˜åº¦ç”±å›¾ç‰‡æ’‘å¼€ */
.input-image-item {
  border-radius: 6px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  overflow: hidden;
}

/* æ ¸å¿ƒï¼šå®½åº¦100%ï¼Œé«˜åº¦è‡ªåŠ¨ï¼Œè‡ªç„¶æ¯”ä¾‹ï¼›ä¸€èˆ¬æ¨ªå‘å›¾å°±åƒä½ æˆªå›¾é‚£æ · */
.input-image-item img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: contain;
}

/* â€œï¼‹â€ åŠ å·å¡ç‰‡ï¼Œç”¨æ¥ä¸Šä¼ æ›´å¤šå›¾ç‰‡ */
.input-image-add {
  position: relative;
  display: block;
  border-radius: 6px;
  border: 1px dashed #d1d5db;
  background: #f9fafb;
  cursor: pointer;
  padding: 6px 0;
  text-align: center;
  transition: background 0.15s ease, border-color 0.15s ease;
}

.input-image-add:hover {
  background: #f3f4ff;
  border-color: #a5b4fc;
}

.input-image-add .add-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  font-size: 8.5px;
  color: #6b7280;
}

.input-image-add .add-plus {
  font-size: 12px;
  line-height: 1;
}

/* éšè—çœŸæ­£çš„ file inputï¼Œè®©æ•´ä¸ªå¡ç‰‡éƒ½å¯ä»¥ç‚¹ */
.input-image-add input[type="file"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}



/* Parameters æŠ˜å å¤´éƒ¨ï¼šè§†è§‰ä¸Šå’Œ Prompt ä¸€è‡´ */
.input-params-header {
  display: flex;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: 8.5px;
  color: #4b5563;
  padding: 0 2px;
  /* margin-top: 2px; */
}

.input-params-toggle-icon {
  margin-right: 4px;
  font-size: 8.5px;
  color: #9ca3af;
}

.input-params-title-text {
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* æŠ˜å ä½“ */
.input-params-body {
  margin-top: 2px;
}

/* ========== å‚æ•°åŒºï¼ˆParametersï¼‰ï¼šä¸‰åˆ— + ä¸¤åˆ—ç´§å‡‘å¸ƒå±€ ========== */
.input-params-title {
  display: none;
}

.input-params-grid {
  display: grid;
  /* 6 ç­‰åˆ†ï¼šå‰ 3 ä¸ªå­—æ®µå„å  2 ä»½ = 3 åˆ—ï¼›
     å 2 ä¸ªå­—æ®µå„å  3 ä»½ = 2 åˆ— */
  grid-template-columns: repeat(6, minmax(0, 1fr));
  column-gap: 6px;
  row-gap: 2px;
}

/* é»˜è®¤ï¼šæ¯ä¸ªå­—æ®µå  2 ä»½ â†’ ä¸€è¡Œæœ€å¤š 3 ä¸ª */
.input-param-field {
  display: flex;
  flex-direction: column;
  gap: 1px;
  font-size: 7.5px;
  color: #4b5563;
  grid-column: span 2;
}

/* ä»ç¬¬ 4 ä¸ªå¼€å§‹ï¼ˆheight / widthï¼‰ï¼šå„å  3 ä»½ â†’ ä¸€è¡Œ 2 ä¸ªé“ºæ»¡ */
.input-param-field:nth-child(n + 4) {
  grid-column: span 3;
}


.input-param-label {
  white-space: nowrap;
}

.input-param-input {
  height: 16px;
  font-size: 8px;
  padding: 1px 3px;
  border-radius: 3px;
  border: 1px solid #e5e7eb;
  background: #ffffff;
  color: #374151;
  outline: none;
  box-sizing: border-box;
}

.input-param-input:focus {
  border-color: #93c5fd;
  box-shadow: 0 0 0 1px #bfdbfe;
}

/* Parameters å¤´éƒ¨ç¦ç”¨ï¼šåŒæ ·æ•ˆæœ */
.input-params-header.is-disabled {
  cursor: default;
  opacity: 0.45;
  pointer-events: none;
}

.input-params-header.is-disabled .input-params-toggle-icon {
  color: #d1d5db;
}

/* å·¦ä¾§ Input åŒºï¼šPositive / Negative / Images / Parameters ä¹‹é—´çš„è™šçº¿åˆ†éš” */
.prompt-section,
.input-images-section,
.input-params-section {
  margin-top: 4px;
  padding-top: 4px;
  border-top: 1px dashed #e5e7eb;
}

/* ç¬¬ä¸€å—ä¸ç”»è™šçº¿ï¼ˆé€šå¸¸æ˜¯ Positive Promptï¼‰ */
.prompt-section:first-child,
.input-images-section:first-child,
.input-params-section:first-child {
  border-top: none;
  margin-top: 0;
  padding-top: 0;
}

/* ========== Input / Output æ ‡é¢˜è¡Œ ========== */
/* ç»Ÿä¸€çš„ IO å¤´éƒ¨ï¼šInput / Output éƒ½ç”¨å®ƒ */
.io-header {
  display: flex;
  align-items: center;
  padding: 0 2px;          /* ä¸¤è¾¹ä¿æŒä¸€æ · */
  line-height: 1.4;
}

/* æ ‡é¢˜æ–‡å­—æœ¬èº« */
.io-title {
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: #6b7280;
}

/* æ ‡é¢˜ä¸‹æ–¹çš„é‚£æ¡å…¬å…±è™šçº¿ */
.io-divider {
  border-top: 1px dashed #e5e7eb;
  margin-top: 4px;
  margin-bottom: 4px;      /* çœ‹ä½ éœ€è¦ï¼Œä¸è¦çš„è¯æ”¹æˆ 0 */
}

.io-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 0;
}

.io-header-title {
  font-size: 9px;
  font-weight: 600;
  color: #4b5563;
}

.io-header-refresh {
  cursor: pointer;
  font-size: 10px;
  color: #6b7280;
  padding: 0 2px;
}

.io-header-refresh:hover {
  color: #2563eb;
}

/* Output æ ‡é¢˜ + â–¶ æŒ‰é’®å®¹å™¨ï¼ˆä¸å†ä½¿ç”¨ footerï¼‰ */
.output-header {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* margin-bottom: 4px; */
  font-size: 9px;
  font-weight: 600;
  color: #6b7280;
}

.output-title {
  user-select: none;
}

/* æ¯ä¸ªå—çš„åŸºæœ¬é—´è· */
.input-section {
  margin-top: 4px;
  padding-top: 4px;
}

/* ç”¨äº Positive Prompt çš„ç‰ˆæœ¬ï¼šé¡¶ç«¯å’Œ INPUT å¤´å¯¹é½ */
.input-section--primary {
  margin-top: 0;
  padding-top: 0;
  border-top: none;
}

/* ä»ç¬¬äºŒä¸ª .input-section å¼€å§‹ï¼Œå—ä¹‹é—´æ‰åŠ è™šçº¿ */
.input-section + .input-section {
  border-top: 1px dashed #e5e7eb;
}


/* å°æŒ‰é’®ï¼Œå³ä¸Šè§’ */
.add-clip-btn {
  width: 18px;
  height: 18px;
  border-radius: 999px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
  opacity: 0;                             /* é»˜è®¤éšè—ï¼Œhover å¡ç‰‡æ—¶å‡ºç° */
  transition: opacity 0.15s ease-out, color 0.15s ease-out;
}

.node-card:hover .add-clip-btn {
  opacity: 1;
}

.add-clip-btn:hover {
  color: #2563eb;
}

/* ========== èŠ‚ç‚¹æ•´ä½“å¯å‚ç›´æ‹‰ä¼¸ ========== */

.node-card-resizable {
  position: relative;
}

/* å³ä¸‹è§’åœ†å½¢æ‹–æ‹½æ‰‹æŸ„ï¼šæ›´ç›´è§‚ã€é¿å…å’Œæ»šåŠ¨æ¡é‡å  */
.node-resize-handle {
  position: absolute;
  right: 6px;                 /* å‘å·¦ç¼©ä¸€ç‚¹ï¼Œå’Œå³ä¾§æ»šåŠ¨æ¡é”™å¼€ */
  bottom: 6px;                /* å‘ä¸Šç¼©ä¸€ç‚¹ï¼Œé¿å…è´´è¾¹ */
  width: 16px;
  height: 16px;
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: ns-resize;          /* åªå…è®¸ä¸Šä¸‹æ‹–æ‹½ */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20;
}

/* æ‰‹æŸ„å›¾æ ‡ï¼šä¸‰ç‚¹æ¨ªå‘ grip */
.node-resize-handle::before {
  content: "â‡µ";
  font-size: 10px;
  line-height: 1;
  color: #6B7680;
}

.node-resize-handle:hover {
  border-color: #cbd5f5;
  background: #eef2ff;
}

.node-card-resizing {
  user-select: none;
  cursor: ns-resize;
}

/* ========== IO é¢æ¿å·¦å³å¸ƒå±€ï¼ˆAddWorkflow & I/O ç»Ÿä¸€ï¼‰ ========== */
.io-panel {
  display: flex;
  flex-direction: column;
  flex: 1 1 0;
  min-width: 0;
  padding: 2px 4px;
  box-sizing: border-box;
}

.io-panel--left {
  border-right: 1px solid #e5e7eb;
}

.io-panel--right {
  align-items: stretch;
  justify-content: flex-start;
}

/* å¹²å‡€ç‰ˆæ ‡é¢˜ï¼šæ— ä¸‹åˆ’çº¿ã€æ— é¢å¤– marginï¼Œä»…åšå°æ ‡é¢˜æ–‡æœ¬ç”¨ */
.io-label {
  font-size: 10px;
  font-weight: 500;
  color: #374151; /* å’Œç°åœ¨çš„ io-title æ–‡æœ¬é¢œè‰²ä¿æŒä¸€è‡´ */
  line-height: 1.2;
  /* ä¸è¦ margin / border / paddingï¼Œä¸‹åˆ’çº¿ç”± io-divider æ§åˆ¶ */
}


/* èŠ‚ç‚¹å†…éƒ¨æŒ‰é’® */
/* å…¬å…±åœ†å½¢æŒ‰é’®æ ·å¼ï¼ˆæŠ½ç¦»æ‰€æœ‰é‡å¤å±æ€§ï¼‰ */
.icon-circle-btn {
  margin-left: auto;
  width: 14px;
  height: 14px;
  border-radius: 999px; /* åœ†å½¢ */
  border: 1px solid #e5e7eb !important; /* è¦†ç›–å†…è”çš„ border: none */
  background: #ffffffff !important;
  color: #6b7280 !important;
  font-size: 10px !important;
  display: inline-flex !important;
  align-items: center !important; /* å‚ç›´å±…ä¸­ */
  justify-content: center !important; /* æ°´å¹³å±…ä¸­ */
  cursor: pointer !important;
  /* å¯é€‰ï¼šæ·»åŠ è¿‡æ¸¡ï¼Œhover é¢œè‰²å˜åŒ–æ›´ä¸æ»‘ */
  transition: color 0.2s ease;
}

/* hover é«˜äº®æ ·å¼ï¼ˆæ›¿ä»£ JS çš„ mouseenter/mouseleaveï¼‰ */
.icon-circle-btn:hover {
  color: #ffffffff !important; /* æ–‡å­—å˜ç™½è‰²ï¼ˆåŸèƒŒæ™¯è‰²ï¼‰ */
  background: #6b7280 !important; /* èƒŒæ™¯å˜è“è‰²ï¼ˆåŸæ–‡å­—é«˜äº®è‰²ï¼‰ */
  border-color: #6b7280 !important; /* è¾¹æ¡†åŒæ­¥èƒŒæ™¯è‰²ï¼Œè§†è§‰æ›´ç»Ÿä¸€ */
}

/* ç¦ç”¨çŠ¶æ€ï¼ˆå¦‚æœéœ€è¦ï¼‰ */
.icon-circle-btn:disabled,
.icon-circle-btn.disabled {
  cursor: not-allowed !important;
  color: #d1d5db !important;
  border-color: #e5e7eb !important;
}

/* ğŸ”µ Output Clip Button â€” ä¸“é—¨æ§åˆ¶å›¾æ ‡æ˜¾ç¤º */
.output-clip-btn {
  font-size: 9px !important;     /* æ§åˆ¶å›¾æ ‡å¤§å° */
  line-height: 1 !important;     /* é¿å…ä¸Šä¸‹ä¸å±…ä¸­ */
  padding: 0 !important;         /* é¿å…æ’‘å¤§åœ†å½¢ */
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* â­ ä¸“é—¨æ”¾å¤§ â¤ï¼Œä¸å½±å“å…¶ä»–åœ†æŒ‰é’® */
.send-btn-icon {
  font-size: 7px !important;  /* åŸæœ¬ 10pxï¼Œå¯æŒ‰éœ€è°ƒæ•´ 11/12/13 */
  line-height: 1 !important;
  padding: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}